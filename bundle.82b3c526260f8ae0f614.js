!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";function r(t){(t||window.event).preventDefault()}function a(){var t=v.getElementsByClassName("active")[0];t&&t.classList.remove("active")}function i(t){r(t);var n=t.dataTransfer.files[0],e=new FileReader;/image/.test(n.type)&&(this.classList.add("active"),e.onload=function(){console.log(n);var t=new Image;t.onload=function(){var n=this.width,e=this.height;f.classList.remove("init"),g.classList.add("active"),a(),f.width=n,f.height=e,b.drawImage(t,0,0,n,e),x=new d.default(this)},t.src=e.result},e.readAsDataURL(n))}function o(t){var n=t.target||t.srcElement;if("li"===n.tagName.toLocaleLowerCase()){var e=n.getAttribute("data-filter");x&&(a(),b.putImageData(x[e](),0,0),console.log("apply "+e),n.classList.add("active"))}}function s(){for(var t=g.getElementsByTagName("input"),n=[],e=void 0,r=0,i=t.length;r<i;r++)e=t[r].value-0,Number.isNaN(e)&&(e=0),t[r].value=e,n.push(e);a(),b.putImageData(x.conv(n),0,0)}function l(t){var n=t.target||t.srcElement;"input"===n.tagName.toLocaleLowerCase()&&(n.value=n.value.replace(/[^\+\/\-\d\.]*/g,""))}function c(t){"input"===(t.target||t.srcElement).tagName.toLocaleLowerCase()&&13===t.keyCode&&s.apply(this)}e(1);var u=e(6),d=function(t){return t&&t.__esModule?t:{default:t}}(u);e(7);var p=function(t){return"string"==typeof t?document.getElementById(t):t},f=p("canvas"),h=p("wrapper"),v=p("filter-li"),g=p("mat-con"),m=p("apply-btn"),b=f.getContext&&f.getContext("2d"),x=null;v.addEventListener("click",o,!1),h.addEventListener("dragenter",r,!1),h.addEventListener("dragover",r,!1),h.addEventListener("drop",i,!1),g.addEventListener("input",l,!1),g.addEventListener("keyup",c,!1),m.addEventListener("click",s,!1)},function(t,n,e){var r=e(2);"string"==typeof r&&(r=[[t.i,r,""]]);var a={};a.transform=void 0;e(4)(r,a);r.locals&&(t.exports=r.locals)},function(t,n,e){n=t.exports=e(3)(void 0),n.push([t.i,"/*css reset*/\r\n/**, *:before, *:after{*/\r\n    /*box-sizing: inherit;*/\r\n/*}*/\r\n/*html{*/\r\n    /*box-sizing: border-box;*/\r\n    /*font-size: 16px;*/\r\n/*}*/\r\nbody,div,ul,li{ margin:0;padding: 0; }\r\nli{ list-style: none; }\r\nimg{ border: 0 none; }\r\na{ text-decoration: none; }\r\n\r\n/*commom css*/\r\n.clear { zoom:1; }\r\n.clear:after { content:''; display:block; clear:both; }\r\n\r\n.container{ /*min-width: 500px;*/margin-left: auto;margin-right: auto;}\r\n@media (min-width: 768px){  .container {  width: 750px;  }  }\r\n@media (min-width: 992px){  .container {  width: 970px;  }    }\r\n@media (min-width: 1200px){  .container {  width: 1170px;  }  }\r\n.txt_center{  text-align: center;  }\r\n\r\n\r\n\r\n/*content css*/\r\nbody{\r\n    font-family: \"Helvetica Neue\", Helvetica, Microsoft Yahei,sans-serif;\r\n    font-size: 14px;\r\n}\r\n\r\nheader{\r\n    padding: 1em 2em;\r\n    color: #cdbfe3;\r\n    text-shadow: 0 1px 0 rgba(0,0,0,.1);\r\n    background-color: #6f5499;\r\n    background-image: linear-gradient(to bottom,#563d7c 0,#6f5499 100%);\r\n}\r\n/*header .container{padding: 15px 30px;}*/\r\nheader h1{font-size: 30px;color: #fff;}\r\nheader p{font-size: 18px;}\r\n\r\n/*预置滤镜选项*/\r\n.preset{\r\n    /*margin-top: 20px;*/\r\n    background: #f5f5f5;\r\n    padding: 10px 0;\r\n}\r\n.preset ul{text-align: center;margin: 0 auto;}\r\n.preset li{\r\n    display: inline-block;\r\n    width: 10%;\r\n    min-width: 4em;\r\n    _float: left;\r\n    margin: 4px 6px;\r\n    padding: 6px 12px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    border: 1px solid #000;\r\n\r\n}\r\n/*@media (max-width: 540px){*/\r\n    /*.preset li{*/\r\n        /*display: block;*/\r\n        /*float: none;*/\r\n    /*}*/\r\n/*}*/\r\n.preset li:hover,.preset .active{\r\n    background-color: #6f5499;\r\n    color: #fff;\r\n}\r\n.preset span{\r\n/*    display: table-cell;\r\n    float: left;\r\n    width: 100%;*/\r\n}\r\n\r\n/*图像显示部分*/\r\n/*画布背景*/\r\n.content{\r\n    margin-top: 20px;\r\n    position: relative;\r\n    overflow: hidden;\r\n    border: 1px solid #C3C3C3;\r\n    background: #e9e9e9;\r\n    background-image: -webkit-linear-gradient(top, transparent 39px, rgba(200, 200, 200, 0.5) 40px), -webkit-linear-gradient(left, transparent 39px, rgba(200, 200, 200, 0.5) 40px);\r\n    background-size: 40px 40px;\r\n    /*max-height: 540px;*/\r\n    /*min-height: 300px;*/\r\n}\r\n/*画布*/\r\n/*画布默认大小*/\r\n.init{\r\n    width: 640px;\r\n    height: 480px;\r\n}\r\n.content canvas{\r\n    display: block;\r\n    margin: 0 auto;\r\n    border: 1px solid rgba(0,0,0,0.5);\r\n    background: #fff;\r\n}\r\n/*拖放提示*/\r\n.tip{\r\n    display: block;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n}\r\n#wrapper.active .tip{\r\n    display: none;\r\n}\r\n/*用与canvas同大小的div作为放置目标*/\r\n/*#dropper{*/\r\n    /*display: none;*/\r\n    /*position: absolute;*/\r\n    /*width: 640px;*/\r\n    /*height: 480px;*/\r\n    /*top: 50%;*/\r\n    /*left: 50%;*/\r\n    /*margin: -240px -320px;*/\r\n    /*line-height: 480px;*/\r\n    /*text-align: center;*/\r\n    /*background: #ff0;           !*调试背景色*!*/\r\n/*}*/\r\n/*#dropper span{*/\r\n    /*display: none;*/\r\n/*}*/\r\n/*#dropper.active, #dropper.tip span{*/\r\n    /*display: block;*/\r\n/*}*/\r\n\r\n/*矩阵输入表单*/\r\n.mat-con {\r\n    /*display: none;*/\r\n    position: absolute;\r\n    z-index: 99;\r\n    top: 2em;\r\n    right: 2em;\r\n    /*bottom: 2em;*/\r\n    text-align: center;\r\n    background: rgba(0,0,0,0.4);\r\n}\r\n.mat-con.active{\r\n    display: block;\r\n}\r\n.mat-con div{\r\n    width: 10em;\r\n}\r\n.mat-con input{\r\n    width: 2em;\r\n    margin: 5px;\r\n}\r\n.mat-con button{\r\n    border: none;\r\n    outline: none;\r\n    width: 100px;\r\n    padding: 4px 6px;\r\n    margin: 4px 0;\r\n    cursor: pointer;\r\n}\r\n.mat-con button:hover{\r\n    background: #fff;\r\n}\r\n",""])},function(t,n,e){"use strict";function r(t,n){var e=t[1]||"",r=t[3];if(!r)return e;if(n&&"function"==typeof btoa){var i=a(r);return[e].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([i]).join("\n")}return[e].join("\n")}function a(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var n=[];return n.toString=function(){return this.map(function(n){var e=r(n,t);return n[2]?"@media "+n[2]+"{"+e+"}":e}).join("")},n.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(r[i]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"==typeof o[0]&&r[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),n.push(o))}},n}},function(t,n,e){function r(t,n){for(var e=0;e<t.length;e++){var r=t[e],a=h[r.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(u(r.parts[i],n))}else{for(var o=[],i=0;i<r.parts.length;i++)o.push(u(r.parts[i],n));h[r.id]={id:r.id,refs:1,parts:o}}}}function a(t,n){for(var e=[],r={},a=0;a<t.length;a++){var i=t[a],o=n.base?i[0]+n.base:i[0],s=i[1],l=i[2],c=i[3],u={css:s,media:l,sourceMap:c};r[o]?r[o].parts.push(u):e.push(r[o]={id:o,parts:[u]})}return e}function i(t,n){var e=g(t.insertInto);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=x[x.length-1];if("top"===t.insertAt)r?r.nextSibling?e.insertBefore(n,r.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),x.push(n);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(n)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var n=x.indexOf(t);n>=0&&x.splice(n,1)}function s(t){var n=document.createElement("style");return t.attrs.type="text/css",c(n,t.attrs),i(t,n),n}function l(t){var n=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(n,t.attrs),i(t,n),n}function c(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function u(t,n){var e,r,a,i;if(n.transform&&t.css){if(!(i=n.transform(t.css)))return function(){};t.css=i}if(n.singleton){var c=b++;e=m||(m=s(n)),r=d.bind(null,e,c,!1),a=d.bind(null,e,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=l(n),r=f.bind(null,e,n),a=function(){o(e),e.href&&URL.revokeObjectURL(e.href)}):(e=s(n),r=p.bind(null,e),a=function(){o(e)});return r(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;r(t=n)}else a()}}function d(t,n,e,r){var a=e?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(n,a);else{var i=document.createTextNode(a),o=t.childNodes;o[n]&&t.removeChild(o[n]),o.length?t.insertBefore(i,o[n]):t.appendChild(i)}}function p(t,n){var e=n.css,r=n.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}function f(t,n,e){var r=e.css,a=e.sourceMap,i=void 0===n.convertToAbsoluteUrls&&a;(n.convertToAbsoluteUrls||i)&&(r=y(r)),a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var h={},v=function(t){var n;return function(){return void 0===n&&(n=t.apply(this,arguments)),n}}(function(){return window&&document&&document.all&&!window.atob}),g=function(t){var n={};return function(e){return void 0===n[e]&&(n[e]=t.call(this,e)),n[e]}}(function(t){return document.querySelector(t)}),m=null,b=0,x=[],y=e(5);t.exports=function(t,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");n=n||{},n.attrs="object"==typeof n.attrs?n.attrs:{},n.singleton||(n.singleton=v()),n.insertInto||(n.insertInto="head"),n.insertAt||(n.insertAt="bottom");var e=a(t,n);return r(e,n),function(t){for(var i=[],o=0;o<e.length;o++){var s=e[o],l=h[s.id];l.refs--,i.push(l)}if(t){r(a(t,n),n)}for(var o=0;o<i.length;o++){var l=i[o];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete h[l.id]}}}};var w=function(){var t=[];return function(n,e){return t[n]=e,t.filter(Boolean).join("\n")}}()},function(t,n,e){"use strict";t.exports=function(t){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var e=n.protocol+"//"+n.host,r=e+n.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,n){var a=n.trim().replace(/^"(.*)"$/,function(t,n){return n}).replace(/^'(.*)'$/,function(t,n){return n});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return t;var i;return i=0===a.indexOf("//")?a:0===a.indexOf("/")?e+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(n){r(this,t),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.img=n,this.width=n.width,this.height=n.height,this.canvas.width=n.width,this.canvas.height=n.height,this.ctx.drawImage(this.img,0,0,this.width,this.height)}return a(t,[{key:"getImageData",value:function(t,n,e,r){return this.ctx.getImageData(t||0,n||0,e||this.width,r||this.height)}},{key:"copyImageData",value:function(t){t=t||this.getImageData();var n=document.createElement("canvas"),e=n.getContext("2d"),r=t.width,a=t.height;return n.width=r,n.height=a,e.putImageData(t,0,0),e.getImageData(0,0,r,a)}},{key:"greyScale",value:function(t){t=t||this.getImageData();for(var n=t.data,e=void 0,r=void 0,a=void 0,i=void 0,o=0,s=n.length;o<s;o+=4)e=n[o],r=n[o+1],a=n[o+2],i=.299*e+.587*r+.114*a,n[o]=n[o+1]=n[o+2]=i;return t}},{key:"black",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;t=t||this.getImageData();for(var e=t.data,r=void 0,a=0,i=e.length;a<i;a+=4)r=.3*e[a]+.6*e[a+1]+.1*e[a+2]>=n?255:0,e[a]=e[a+1]=e[a+2]=r;return t}},{key:"comic",value:function(t){t=t||this.getImageData();for(var n=t.data,e=void 0,r=void 0,a=void 0,i=0,o=n.length;i<o;i+=4)e=n[i],r=n[i+1],a=n[i+2],n[i]=Math.abs(r-a+r+e)*e/256,n[i+1]=Math.abs(a-r+e+a)*e/256,n[i+2]=Math.abs(a-r+e+a)*r/256;return t}},{key:"sepia",value:function(t){t=t||this.getImageData();for(var n=t.data,e=void 0,r=void 0,a=void 0,i=0,o=n.length;i<o;i+=4)e=n[i],r=n[i+1],a=n[i+2],n[i]=.393*e+.769*r+.189*a,n[i+1]=.349*e+.686*r+.168*a,n[i+2]=.272*e+.534*r+.131*a;return t}},{key:"invert",value:function(t){t=t||this.getImageData();for(var n=t.data,e=0,r=n.length;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2];return t}},{key:"brightness",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;t=t||this.getImageData();for(var e=t.data,r=0,a=e.length;r<a;r+=4)e[r]+=n,e[r+1]+=n,e[r+2]+=n;return t}},{key:"sharpen",value:function(t){return t=t||this.getImageData(),this.conv([0,-1,0,-1,5,-1,0,-1,0],t)}},{key:"edgeDetection",value:function(t){return t=t||this.getImageData(),this.conv([-1,-1,-1,-1,8,-1,-1,-1,-1],this.gaussBlur(t))}},{key:"embossing",value:function(t){return t=t||this.getImageData(),this.conv([1,1,1,1,.7,-1,-1,-1,-1],t)}},{key:"gaussBlur",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;t=t||this.getImageData();for(var r=2*n+1,a=-1/(2*e*e),i=-a/Math.PI,o=new Array(r*r),s=0,l=-n,c=0;l<=n;l++)for(var u=-n;u<=n;u++,c++)o[c]=i*Math.exp(a*(l*l+u*u)),s+=o[c];return this.conv(o,t,r,s)}},{key:"sketch",value:function(t){t=t||this.getImageData();for(var n=this.greyScale(t),e=this.invert(this.copyImageData(n)),r=this.gaussBlur(e),a=n.data,i=r.data,o=void 0,s=void 0,l=void 0,c=void 0,u=0,d=a.length;u<d;u+=4)for(var p=0;p<3;p++)c=u+p,o=a[c],s=i[c],l=o+o*s/(255-s),l=l>255?255:l,a[c]=l;return n}},{key:"conv",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=n||this.getImageData();for(var a=n.data,i=this.width,o=this.height,s=this.ctx.createImageData(i,o),l=s.data,c=Math.floor(e/2),u=0;u<o;u++)for(var d=0;d<i;d++){for(var p=0;p<3;p++){var f=4*(u*i+d)+p;if(d<c||u<c||d>=i-c||u>=o-c)l[f]=a[f];else{for(var h=0,v=0,g=-c;g<=c;g++)for(var m=f+4*i*g,b=-c;b<=c;b++){var x=m+4*b;h+=t[v]*a[x],v++}l[f]=h/r}}l[4*(u*i+d)+3]=255}return s}}]),t}();n.default=i},function(t,n){t.exports='<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <meta name="viewport" content="width=device-width">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">\r\n    <title>Canvas Images Processing</title>\r\n</head>\r\n<body>\r\n<header>\r\n    <div class="container">\r\n        <h1>基于canvas的图像处理</h1>\r\n        <p>像素级操作，Web也能玩转图片&nbsp;&nbsp;&nbsp; @Ytime</p>\r\n    </div>\r\n</header>\r\n\x3c!--预置滤镜--\x3e\r\n<nav class="preset">\r\n    <div class="container">\r\n        <ul id="filter-li" class="clear">\r\n            <li data-filter="getImageData">原图</li>\r\n            <li data-filter="greyScale">灰度</li>\r\n            <li data-filter="black">黑白</li>\r\n            <li data-filter="comic">连环画</li>\r\n            <li data-filter="sepia">怀旧</li>\r\n            <li data-filter="invert">底片</li>\r\n            <li data-filter="brightness">加亮</li>\r\n            <li data-filter="sharpen">锐化</li>\r\n            <li data-filter="edgeDetection">边缘检测</li>\r\n            <li data-filter="embossing">浮雕</li>\r\n            <li data-filter="gaussBlur">模糊</li>\r\n            <li data-filter="sketch">素描</li>\r\n\r\n        </ul>\r\n    </div>\r\n</nav>\r\n\r\n\x3c!--图片显示--\x3e\r\n<div id="wrapper" class="container content" title="拖拽新图片替换" droppable="true">\r\n    <canvas id="canvas" class="init">您的浏览器不支持canvas，请更换现代浏览器</canvas>\r\n    <div class="tip">\r\n        <span>把图片拖拽到此处</span>\r\n    </div>\r\n    \x3c!--卷积矩阵--\x3e\r\n    <div class="mat-con" id="mat-con">\r\n        <div>\r\n            <input type="text" value="0"><input type="text" value="0"><input type="text" value="0"><input type="text" value="0"><input type="text" value="1"><input type="text" value="0"><input type="text" value="0"><input type="text" value="0"><input type="text" value="0">\r\n        </div>\r\n        <div><button id="apply-btn" title="矩阵卷积滤波">应用</button></div>\r\n    </div>\r\n</div>\r\n\r\n</body>\r\n</html>'}]);
//# sourceMappingURL=bundle.82b3c526260f8ae0f614.js.map